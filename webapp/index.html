<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Admin & Analytics Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                        "card-dark": "#1C252E",
                        "border-dark": "#2A3441",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "2xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <link href="styles.css?v=5" rel="stylesheet" />
    <link href="org-chart.css?v=5" rel="stylesheet" />
    <link href="integrations.css?v=4" rel="stylesheet" />
    <link href="notifications.css?v=4" rel="stylesheet" />
    <link href="auth.css?v=4" rel="stylesheet" />
</head>

<body
    class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white font-display antialiased overflow-hidden">
    <div class="flex h-screen w-full overflow-hidden">
        <!-- Sidebar -->
        <aside
            class="w-64 flex-shrink-0 border-r border-slate-200 dark:border-border-dark bg-white dark:bg-[#111418] flex flex-col justify-between p-4 z-10 hidden md:flex">
            <div class="flex flex-col gap-6">
                <!-- Company Header -->
                <div class="flex items-center gap-3 px-2">
                    <div class="bg-center bg-no-repeat bg-cover rounded-full h-10 w-10 shrink-0 company-logo-bg">
                    </div>
                    <div class="flex flex-col overflow-hidden">
                        <h1 class="text-base font-bold leading-tight truncate">Acme Corp</h1>
                        <p class="auth-required text-slate-500 dark:text-slate-400 text-xs font-medium truncate">Admin
                            Console</p>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="flex flex-col gap-1">
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-primary/10 text-primary" href="#"
                        data-page="company">
                        <span class="material-symbols-outlined text-[20px]">domain</span>
                        <span class="text-sm font-semibold">Company Profile</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
                        href="#" data-page="org-chart">
                        <span class="material-symbols-outlined text-[20px]">account_tree</span>
                        <span class="text-sm font-medium">Organization Chart</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
                        href="#" data-page="employee-directory">
                        <span class="material-symbols-outlined text-[20px]">badge</span>
                        <span class="text-sm font-medium">Employee Directory</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
                        href="#" data-page="users">
                        <span class="material-symbols-outlined text-[20px]">group</span>
                        <span class="text-sm font-medium">User Management</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
                        href="#" data-page="integrations">
                        <span class="material-symbols-outlined text-[20px]">extension</span>
                        <span class="text-sm font-medium">Integrations</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
                        href="#" data-page="settings">
                        <span class="material-symbols-outlined text-[20px]">settings</span>
                        <span class="text-sm font-medium">Settings</span>
                    </a>
                </nav>
            </div>

            <!-- System Health Widget -->
            <div class="flex flex-col gap-4">
                <div
                    class="rounded-lg bg-slate-50 dark:bg-slate-800/50 p-4 border border-slate-200 dark:border-border-dark">
                    <p class="text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider">
                        System Health</p>
                    <div class="flex items-center justify-between mb-1">
                        <span class="text-xs font-medium">Data Sync</span>
                        <span class="text-xs font-bold text-emerald-500" id="sync-status">Active</span>
                    </div>
                    <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-1">
                        <div class="bg-emerald-500 h-1 rounded-full transition-all w-full" id="sync-progress"></div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col h-full overflow-y-auto relative scroll-smooth">
            <!-- Header -->
            <header
                class="sticky top-0 z-20 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-slate-200 dark:border-border-dark px-6 py-4 flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-black tracking-tight">Org Analytics</h2>
                    <p class="text-slate-500 dark:text-slate-400 text-sm">Real-time organizational insights</p>
                </div>
                <div class="flex items-center gap-3">
                    <button
                        class="p-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-white transition-colors relative"
                        id="notifications-btn">
                        <span class="material-symbols-outlined">notifications</span>
                        <span
                            class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-background-light dark:border-background-dark"></span>
                    </button>
                    <!-- User avatar / login button -->
                    <div class="relative">
                        <button id="user-avatar-btn" class="auth-guest" title="Sign in"
                            aria-label="Sign in or view account">
                            <img id="user-avatar-img" src="" alt="" class="user-avatar-img-hidden" />
                            <span class="avatar-guest-icon material-symbols-outlined">person</span>
                        </button>
                        <div class="auth-user-popover" id="auth-user-popover">
                            <p class="auth-popover-name" id="auth-popover-name"></p>
                            <p class="auth-popover-role" id="auth-popover-role"></p>
                            <p class="auth-popover-email" id="auth-popover-email"></p>
                            <div class="auth-popover-divider"></div>
                            <button class="auth-popover-action" id="auth-change-password-btn">
                                <span class="material-symbols-outlined popover-icon-sm">lock_reset</span>
                                Change Password
                            </button>
                            <button class="auth-popover-logout" id="auth-logout-btn">
                                <span class="material-symbols-outlined popover-icon-sm">logout</span>
                                Sign out
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Page Content Container -->
            <div id="page-content">
                <!-- Dashboard Content -->
                <div id="page-company" class="page-section p-6 max-w-7xl mx-auto w-full flex flex-col gap-6">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Headcount Card -->
                        <div
                            class="rounded-xl bg-white dark:bg-card-dark p-6 shadow-sm border border-slate-200 dark:border-border-dark flex flex-col justify-between min-h-[160px]">
                            <div class="flex justify-between items-start">
                                <div class="p-2 rounded-lg bg-blue-500/10 text-blue-500">
                                    <span class="material-symbols-outlined">badge</span>
                                </div>
                                <span
                                    class="inline-flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-1 text-xs font-medium text-emerald-500">
                                    <span class="material-symbols-outlined text-[14px]">trending_up</span>
                                    +5% increase
                                </span>
                            </div>
                            <div>
                                <p class="text-slate-500 dark:text-slate-400 text-sm font-medium">Total Headcount</p>
                                <h3 class="text-4xl font-black mt-1" id="total-headcount">1,240</h3>
                            </div>
                        </div>

                        <!-- Org Spread Card -->
                        <div
                            class="rounded-xl bg-white dark:bg-card-dark p-6 shadow-sm border border-slate-200 dark:border-border-dark flex items-center justify-between gap-4 min-h-[160px]">
                            <div class="flex flex-col justify-between h-full py-1">
                                <div>
                                    <p class="text-slate-500 dark:text-slate-400 text-sm font-medium">Organizational
                                        Spread</p>
                                    <h3 class="text-xl font-bold mt-1">Departments</h3>
                                </div>
                                <div class="flex flex-col gap-1 mt-3" id="department-breakdown">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                            <div class="relative w-32 h-32 flex items-center justify-center">
                                <svg class="w-full h-full transform -rotate-90" viewBox="0 0 36 36">
                                    <circle cx="18" cy="18" r="15.9155" fill="none"
                                        class="text-slate-100 dark:text-slate-800" stroke="currentColor"
                                        stroke-width="3.2" />
                                    <path id="dept-path-3" class="text-orange-400"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="currentColor" stroke-dasharray="0, 100" stroke-width="3.2">
                                    </path>
                                    <path id="dept-path-2" class="text-purple-500"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="currentColor" stroke-dasharray="0, 100" stroke-width="3.2">
                                    </path>
                                    <path id="dept-path-1" class="text-primary"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="currentColor" stroke-dasharray="0, 100" stroke-width="3.2">
                                    </path>
                                </svg>
                                <div class="absolute flex flex-col items-center">
                                    <span class="text-[10px] font-bold text-slate-400 uppercase">Groups</span>
                                    <span class="text-base font-black" id="total-groups">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Row 2: Diversity & Locations -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Workforce Diversity Card -->
                        <div
                            class="rounded-xl bg-white dark:bg-card-dark p-6 shadow-sm border border-slate-200 dark:border-border-dark flex items-center justify-between gap-4 min-h-[160px]">
                            <div class="flex flex-col justify-between h-full py-1 min-w-0 flex-1">
                                <div>
                                    <p
                                        class="text-slate-500 dark:text-slate-400 text-sm font-medium uppercase tracking-tight">
                                        Workforce Diversity</p>
                                    <h3 class="text-xl font-bold mt-1">Genders</h3>
                                </div>
                                <div class="flex flex-col gap-1 mt-3" id="gender-breakdown">
                                    <div class="flex items-center gap-2">
                                        <span class="w-2 h-2 rounded-full bg-blue-500"></span>
                                        <span class="text-xs text-slate-500 dark:text-slate-400"
                                            id="gender-male-label">Male
                                            (0%)</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="w-2 h-2 rounded-full bg-pink-500"></span>
                                        <span class="text-xs text-slate-500 dark:text-slate-400"
                                            id="gender-female-label">Female (0%)</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="w-2 h-2 rounded-full bg-slate-400"></span>
                                        <span class="text-xs text-slate-500 dark:text-slate-400"
                                            id="gender-other-label">Other (0%)</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Gender Chart -->
                            <div class="relative w-32 h-32 flex items-center justify-center flex-shrink-0">
                                <svg class="w-full h-full transform -rotate-90" viewBox="0 0 36 36"
                                    id="gender-chart-svg">
                                    <circle cx="18" cy="18" r="15.9155" fill="none"
                                        class="text-slate-100 dark:text-slate-800" stroke="currentColor"
                                        stroke-width="4">
                                    </circle>
                                    <path id="gender-female-path" class="text-pink-500"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="currentColor" stroke-dasharray="0, 100" stroke-width="4">
                                    </path>
                                    <path id="gender-male-path" class="text-blue-500"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="currentColor" stroke-dasharray="0, 100" stroke-width="4">
                                    </path>
                                </svg>
                                <div class="absolute flex flex-col items-center">
                                    <span
                                        class="material-symbols-outlined text-[20px] text-slate-400">diversity_3</span>
                                </div>
                            </div>
                        </div>

                        <!-- Location Presence Card -->
                        <div
                            class="rounded-xl bg-white dark:bg-card-dark p-6 shadow-sm border border-slate-200 dark:border-border-dark flex items-center justify-between gap-4 min-h-[160px]">
                            <div class="flex flex-col justify-between h-full py-1 min-w-0 flex-1">
                                <div>
                                    <p
                                        class="text-slate-500 dark:text-slate-400 text-sm font-medium uppercase tracking-tight">
                                        Global Footprint</p>
                                    <h3 class="text-xl font-bold mt-1">Locations</h3>
                                </div>
                                <div class="flex flex-col gap-1 mt-3" id="location-breakdown">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                            <!-- Location Chart -->
                            <div class="relative w-32 h-32 flex items-center justify-center flex-shrink-0">
                                <svg class="w-full h-full transform -rotate-90" viewBox="0 0 36 36"
                                    id="location-chart-svg">
                                    <circle cx="18" cy="18" r="15.9155" fill="none"
                                        class="text-slate-100 dark:text-slate-800" stroke="currentColor"
                                        stroke-width="4">
                                    </circle>
                                    <path id="location-path-3" class="text-amber-500"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="currentColor" stroke-dasharray="0, 100" stroke-width="4">
                                    </path>
                                    <path id="location-path-2" class="text-emerald-500"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="currentColor" stroke-dasharray="0, 100" stroke-width="4">
                                    </path>
                                    <path id="location-path-1" class="text-indigo-500"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="currentColor" stroke-dasharray="0, 100" stroke-width="4">
                                    </path>
                                </svg>
                                <div class="absolute flex flex-col items-center">
                                    <span
                                        class="material-symbols-outlined text-[20px] text-slate-400">location_on</span>
                                    <span class="text-[10px] font-bold text-slate-400 uppercase mt-0.5"
                                        id="total-locations">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom Section -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1">
                    <!-- Activity Feed -->
                    <div
                        class="lg:col-span-2 rounded-xl bg-white dark:bg-card-dark shadow-sm border border-slate-200 dark:border-border-dark flex flex-col">
                        <div
                            class="p-6 border-b border-slate-200 dark:border-border-dark flex items-center justify-between">
                            <h3 class="font-bold text-lg">Organizational Changes</h3>
                            <button class="text-sm text-primary font-medium hover:underline"
                                id="view-audit-log-btn">View Audit Log</button>
                        </div>
                        <div class="flex-1 overflow-y-auto max-h-[500px]" id="activity-feed">
                            <!-- Activity items will be populated by JavaScript -->
                            <div
                                class="flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors border-b border-slate-100 dark:border-border-dark/50 last:border-0">
                                <div class="h-10 w-10 rounded-full bg-cover bg-center shrink-0 sarah-jenkins-bg">
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm text-slate-800 dark:text-slate-200 font-medium">Sarah Jenkins
                                        <span class="font-normal text-slate-500 dark:text-slate-400">updated
                                            hierarchy for</span> Engineering
                                    </p>
                                    <p class="text-xs text-slate-400 mt-1">2 minutes ago</p>
                                </div>
                                <div class="p-2 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500">
                                    <span class="material-symbols-outlined text-[18px]">account_tree</span>
                                </div>
                            </div>
                            <div
                                class="flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors border-b border-slate-100 dark:border-border-dark/50 last:border-0">
                                <div
                                    class="h-10 w-10 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold shrink-0">
                                    W</div>
                                <div class="flex-1">
                                    <p class="text-sm text-slate-800 dark:text-slate-200 font-medium">Data source
                                        synced: <span class="font-bold">Workday</span></p>
                                    <p class="text-xs text-slate-400 mt-1">1 hour ago</p>
                                </div>
                                <div class="p-2 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500">
                                    <span class="material-symbols-outlined text-[18px]">sync</span>
                                </div>
                            </div>
                            <div
                                class="flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors border-b border-slate-100 dark:border-border-dark/50 last:border-0">
                                <div class="h-10 w-10 rounded-full bg-cover bg-center shrink-0 john-doe-bg">
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm text-slate-800 dark:text-slate-200 font-medium">John Doe <span
                                            class="font-normal text-slate-500 dark:text-slate-400">was assigned
                                            to</span> Product Design</p>
                                    <p class="text-xs text-slate-400 mt-1">2 hours ago</p>
                                </div>
                                <div class="p-2 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500">
                                    <span class="material-symbols-outlined text-[18px]">person_add</span>
                                </div>
                            </div>
                            <div
                                class="flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors last:border-0">
                                <div
                                    class="h-10 w-10 rounded-full bg-emerald-500 flex items-center justify-center text-white shrink-0">
                                    <span class="material-symbols-outlined text-[20px]">verified</span>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm text-slate-800 dark:text-slate-200 font-medium">Monthly
                                        organizational audit completed</p>
                                    <p class="text-xs text-slate-400 mt-1">Yesterday</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Sources -->
                    <div
                        class="rounded-xl bg-white dark:bg-card-dark shadow-sm border border-slate-200 dark:border-border-dark flex flex-col">
                        <div
                            class="p-6 border-b border-slate-200 dark:border-border-dark flex items-center justify-between">
                            <h3 class="font-bold text-lg">Data Sources</h3>
                            <button
                                class="p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors text-primary"
                                id="add-source-btn">
                                <span class="material-symbols-outlined">add</span>
                            </button>
                        </div>
                        <div class="p-6 flex flex-col gap-4" id="data-sources">
                            <!-- Data sources will be populated by JavaScript -->
                            <div
                                class="flex items-center gap-4 p-3 rounded-lg border border-slate-200 dark:border-border-dark bg-slate-50/50 dark:bg-slate-800/20">
                                <div
                                    class="w-10 h-10 rounded-lg bg-[#F64F00] flex items-center justify-center text-white shrink-0">
                                    <span class="font-black text-xs">MD</span>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <h4 class="text-sm font-bold truncate">monday.com</h4>
                                    <p class="text-xs text-slate-500 truncate">Project & Workflow Management</p>
                                </div>
                                <div
                                    class="flex items-center gap-1.5 text-xs font-medium text-emerald-500 bg-emerald-500/10 px-2 py-1 rounded-md">
                                    <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                                    Live
                                </div>
                            </div>
                            <button
                                class="w-full py-2.5 text-xs font-bold text-slate-500 hover:text-primary transition-colors border border-dashed border-slate-300 dark:border-slate-600 rounded-lg hover:border-primary hover:bg-primary/5 uppercase tracking-tight">
                                Connect New Provider
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Organization Chart Page (sibling of main, shares flex with sidebar) -->
        <div id="page-org-chart" class="page-section hidden flex-1 relative overflow-hidden">
            <div class="canvas-dot-pattern flex w-full h-full overflow-hidden relative">

                <!-- Sidebar Filters -->
                <button id="oc-filters-show" class="oc-filters-toggle-fab" title="Show filters">
                    <span class="material-symbols-outlined !text-xl">filter_list</span>
                </button>
                <aside class="glass-panel oc-sidebar-filters" id="oc-sidebar-filters">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-sm font-bold text-white uppercase tracking-wider">Smart Filters</h3>
                        <button id="oc-filters-hide" class="text-slate-400 hover:text-white" title="Hide filters"><span
                                class="material-symbols-outlined !text-lg">close</span></button>
                    </div>
                    <div class="space-y-6 overflow-y-auto pr-1 custom-scrollbar flex-1">
                        <div>
                            <label class="text-xs font-semibold text-slate-400 mb-3 block">DEPARTMENT</label>
                            <div class="space-y-2" id="oc-filter-dept">
                                <!-- Dynamically populated from SharedEmployeeStore -->
                            </div>
                        </div>
                        <div class="h-px bg-slate-700/50"></div>
                        <div>
                            <label class="text-xs font-semibold text-slate-400 mb-3 block">LOCATION</label>
                            <div class="space-y-2" id="oc-filter-loc">
                                <!-- Dynamically populated from SharedEmployeeStore -->
                            </div>
                        </div>
                        <div class="h-px bg-slate-700/50"></div>
                        <div>
                            <label class="text-xs font-semibold text-slate-400 mb-3 block">STATUS</label>
                            <div class="flex flex-wrap gap-2" id="oc-filter-status">
                                <!-- Dynamically populated from SharedEmployeeStore -->
                            </div>
                        </div>
                    </div>
                    <div class="mt-auto pt-6">
                        <button id="oc-reset-filters"
                            class="w-full py-2 rounded-lg bg-slate-700/50 hover:bg-slate-700 text-sm font-medium text-slate-300 transition-colors border border-slate-600">
                            Reset Filters
                        </button>
                    </div>
                </aside>

                <!-- Org Chart Header -->
                <header class="glass-panel oc-canvas-header">
                    <div class="flex items-center gap-8">
                        <div class="flex items-center gap-3">
                            <img src="main-logo.png" alt="Freight Right" class="oc-header-logo" />
                        </div>





                        <div class="relative flex w-80 items-center group">
                            <span
                                class="material-symbols-outlined absolute left-3 text-slate-400 group-focus-within:text-indigo-400 transition-colors">search</span>
                            <input
                                class="search-input-glass org-chart-search h-10 w-full rounded-lg pl-10 pr-12 text-sm transition-all outline-none"
                                placeholder="Search employees..." type="text" aria-label="Search employees" />
                            <div class="absolute right-3 flex items-center gap-1">
                                <kbd
                                    class="hidden font-sans text-xs font-medium text-slate-500 group-focus-within:text-slate-400 sm:inline-block">⌘K</kbd>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center gap-6">
                        <div class="flex items-center gap-3 border-r border-slate-700 pr-6 auth-required"
                            id="oc-edit-mode-toggle">
                            <span class="text-sm font-medium text-slate-400">Edit Mode</span>
                            <div
                                class="relative inline-block w-10 align-middle select-none transition duration-200 ease-in">
                                <input
                                    class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer"
                                    id="org-edit-toggle" name="toggle" type="checkbox" aria-label="Toggle edit mode" />
                                <label
                                    class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-700 cursor-pointer"
                                    for="org-edit-toggle"></label>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <button
                                class="flex h-9 items-center justify-center gap-2 rounded-lg bg-slate-800 border border-slate-700 hover:border-slate-600 px-4 text-sm font-medium text-slate-200 transition-all hover:bg-slate-700"
                                data-action="share">
                                <span class="material-symbols-outlined !text-lg">ios_share</span>
                                <span>Share</span>
                            </button>
                            <button
                                class="flex h-9 items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 px-4 text-sm font-bold text-white shadow-lg shadow-indigo-500/20 transition-all hover:shadow-indigo-500/40 hover:brightness-110"
                                data-action="export-pdf">
                                <span class="material-symbols-outlined !text-lg">download_for_offline</span>
                                <span>Export PDF</span>
                            </button>
                        </div>
                    </div>
                </header>

                <!-- Canvas Scroll Area -->
                <div id="org-chart-canvas"
                    class="canvas-dot-pattern absolute top-[68px] left-0 right-0 bottom-0 overflow-auto py-10 pr-10 pl-[340px] cursor-grab">

                    <!-- Department View Pill Bar -->
                    <div id="oc-dept-view-bar"
                        class="sticky top-0 left-0 z-30 flex items-center gap-2 flex-wrap pb-4 pt-0 pointer-events-none">
                        <div class="flex items-center gap-2 flex-wrap pointer-events-auto" id="oc-dept-pills">
                            <!-- Populated dynamically -->
                        </div>
                    </div>

                    <!-- Breadcrumb -->
                    <div class="sticky left-0 flex justify-center mb-8" style="width: 100vw; max-width: 100%;">
                        <div
                            class="glass-panel flex items-center gap-2 rounded-full px-5 py-2 shadow-lg shadow-black/20">
                            <a id="oc-breadcrumb-company"
                                class="text-sm font-medium text-slate-400 hover:text-white transition-colors"
                                href="#">Acme Corp</a>
                            <span class="text-slate-600">/</span>
                            <span class="text-sm font-semibold text-indigo-400">Organization Chart</span>
                        </div>
                    </div>

                    <!-- Org Chart Hierarchy -->
                    <div id="oc-chart-hierarchy" class="flex flex-col items-center gap-0 min-w-max">

                        <!-- CEO Card -->
                        <div class="flex flex-col items-center">
                            <div class="glass-panel org-card group relative rounded-2xl p-5 shadow-2xl border-t-2 border-l border-r border-b border-white/5 border-t-indigo-500 ring-1 ring-white/5 backdrop-blur-xl transition-all duration-300 w-80"
                                data-employee-id="emp_001" data-department="Leadership">
                                <div
                                    class="absolute inset-0 rounded-2xl bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                </div>
                                <div class="relative z-10 flex items-center gap-4">
                                    <div class="relative">
                                        <div
                                            class="h-16 w-16 rounded-2xl bg-center bg-no-repeat bg-cover shadow-lg ring-2 ring-white/10 james-wilson-bg">
                                        </div>
                                        <div
                                            class="absolute -bottom-1 -right-1 h-4 w-4 rounded-full bg-emerald-500 border-2 border-slate-800">
                                        </div>
                                    </div>
                                    <div class="flex-1 overflow-hidden">
                                        <div
                                            class="mb-1 inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[9px] font-bold border border-white/10 text-indigo-400 bg-white/5">
                                            <div class="w-1 h-1 rounded-full bg-current"></div> LEADERSHIP
                                        </div>
                                        <p class="truncate text-lg font-bold text-white employee-name">James Wilson</p>
                                        <p class="truncate text-sm text-slate-400 employee-title">Chief Executive
                                            Officer</p>
                                    </div>
                                </div>
                                <div
                                    class="relative z-10 mt-5 flex items-center justify-between border-t border-white/5 pt-4">
                                    <div
                                        class="flex items-center gap-1.5 rounded-full bg-white/5 px-3 py-1.5 border border-white/5">
                                        <span
                                            class="material-symbols-outlined !text-sm text-indigo-400">supervisor_account</span>
                                        <span class="text-xs font-medium text-slate-300">1,240 Total</span>
                                    </div>
                                    <button
                                        class="text-slate-400 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-colors">
                                        <span class="material-symbols-outlined !text-xl">expand_circle_down</span>
                                    </button>
                                </div>
                            </div>
                            <div class="org-line-v h-16"></div>
                        </div>

                        <!-- VP Level -->
                        <div class="relative flex justify-center gap-16">
                            <!-- Horizontal connector -->
                            <div class="org-line-h absolute top-0 left-[144px] right-[144px]"></div>

                            <!-- VP Engineering -->
                            <div class="relative flex flex-col items-center pt-8">
                                <div class="absolute top-0 h-8 org-line-v"></div>
                                <div class="glass-panel org-card group relative rounded-2xl p-5 shadow-neon-cyan border border-white/5 border-neon-cyan/50 ring-1 ring-white/5 backdrop-blur-xl transition-all duration-300 w-80"
                                    data-employee-id="emp_002" data-department="Engineering">
                                    <div
                                        class="absolute inset-0 rounded-2xl bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                    </div>
                                    <div class="relative z-10 flex items-center gap-4">
                                        <div class="relative">
                                            <div
                                                class="h-16 w-16 rounded-2xl bg-center bg-no-repeat bg-cover shadow-lg ring-2 ring-white/10 sarah-jenkins-bg">
                                            </div>
                                            <div
                                                class="absolute -bottom-1 -right-1 h-4 w-4 rounded-full bg-emerald-500 border-2 border-slate-800">
                                            </div>
                                        </div>
                                        <div class="flex-1 overflow-hidden">
                                            <div
                                                class="mb-1 inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[9px] font-bold border border-white/10 text-neon-cyan bg-white/5">
                                                <div class="w-1 h-1 rounded-full bg-current"></div> ENGINEERING
                                            </div>
                                            <p class="truncate text-lg font-bold text-white employee-name">Sarah Jenkins
                                            </p>
                                            <p class="truncate text-sm text-slate-400 employee-title">VP of Engineering
                                            </p>
                                        </div>
                                    </div>
                                    <div
                                        class="relative z-10 mt-5 flex items-center justify-between border-t border-white/5 pt-4">
                                        <div
                                            class="flex items-center gap-1.5 rounded-full bg-white/5 px-3 py-1.5 border border-white/5">
                                            <span
                                                class="material-symbols-outlined !text-sm text-neon-cyan">supervisor_account</span>
                                            <span class="text-xs font-medium text-slate-300">8 Directs</span>
                                        </div>
                                        <button
                                            class="text-slate-400 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-colors">
                                            <span class="material-symbols-outlined !text-xl">expand_circle_down</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Directors under VP Engineering -->
                                <div class="org-line-v h-16"></div>
                                <div class="relative flex justify-center gap-12 pt-0">
                                    <div class="absolute top-0 h-[2px] w-[calc(100%-18rem)] org-line-h"></div>

                                    <div class="relative flex flex-col items-center pt-8">
                                        <div class="absolute top-0 h-8 org-line-v"></div>
                                        <div class="glass-panel org-card group relative rounded-2xl p-5 shadow-neon-blue border border-white/5 border-l-neon-blue ring-1 ring-white/5 backdrop-blur-xl transition-all duration-300 w-80"
                                            data-employee-id="emp_005" data-department="Engineering">
                                            <div
                                                class="absolute inset-0 rounded-2xl bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                            </div>
                                            <div class="relative z-10 flex items-center gap-4">
                                                <div class="relative">
                                                    <div
                                                        class="h-16 w-16 rounded-2xl bg-center bg-no-repeat bg-cover shadow-lg ring-2 ring-white/10 michael-chen-bg">
                                                    </div>
                                                    <div
                                                        class="absolute -bottom-1 -right-1 h-4 w-4 rounded-full bg-emerald-500 border-2 border-slate-800">
                                                    </div>
                                                </div>
                                                <div class="flex-1 overflow-hidden">
                                                    <div
                                                        class="mb-1 inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[9px] font-bold border border-white/10 text-neon-blue bg-white/5">
                                                        <div class="w-1 h-1 rounded-full bg-current"></div> ENGINEERING
                                                    </div>
                                                    <p class="truncate text-lg font-bold text-white employee-name">
                                                        Michael Chen</p>
                                                    <p class="truncate text-sm text-slate-400 employee-title">Director,
                                                        Platform</p>
                                                </div>
                                            </div>
                                            <div
                                                class="relative z-10 mt-5 flex items-center justify-between border-t border-white/5 pt-4">
                                                <div
                                                    class="flex items-center gap-1.5 rounded-full bg-white/5 px-3 py-1.5 border border-white/5">
                                                    <span
                                                        class="material-symbols-outlined !text-sm text-neon-blue">supervisor_account</span>
                                                    <span class="text-xs font-medium text-slate-300">12 Reports</span>
                                                </div>
                                                <button
                                                    class="text-slate-400 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-colors">
                                                    <span
                                                        class="material-symbols-outlined !text-xl">expand_circle_down</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="relative flex flex-col items-center pt-8">
                                        <div class="absolute top-0 h-8 org-line-v"></div>
                                        <div class="glass-panel org-card group relative rounded-2xl p-5 shadow-neon-emerald border border-white/5 border-l-neon-emerald ring-1 ring-white/5 backdrop-blur-xl transition-all duration-300 w-80"
                                            data-employee-id="emp_006" data-department="Engineering">
                                            <div
                                                class="absolute inset-0 rounded-2xl bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                            </div>
                                            <div class="relative z-10 flex items-center gap-4">
                                                <div class="relative">
                                                    <div
                                                        class="h-16 w-16 rounded-2xl bg-center bg-no-repeat bg-cover shadow-lg ring-2 ring-white/10 elena-rodriguez-bg">
                                                    </div>
                                                    <div
                                                        class="absolute -bottom-1 -right-1 h-4 w-4 rounded-full bg-emerald-500 border-2 border-slate-800">
                                                    </div>
                                                </div>
                                                <div class="flex-1 overflow-hidden">
                                                    <div
                                                        class="mb-1 inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[9px] font-bold border border-white/10 text-neon-emerald bg-white/5">
                                                        <div class="w-1 h-1 rounded-full bg-current"></div> ENGINEERING
                                                    </div>
                                                    <p class="truncate text-lg font-bold text-white employee-name">Elena
                                                        Rodriguez</p>
                                                    <p class="truncate text-sm text-slate-400 employee-title">Director,
                                                        QA</p>
                                                </div>
                                            </div>
                                            <div
                                                class="relative z-10 mt-5 flex items-center justify-between border-t border-white/5 pt-4">
                                                <div
                                                    class="flex items-center gap-1.5 rounded-full bg-white/5 px-3 py-1.5 border border-white/5">
                                                    <span
                                                        class="material-symbols-outlined !text-sm text-neon-emerald">supervisor_account</span>
                                                    <span class="text-xs font-medium text-slate-300">6 Reports</span>
                                                </div>
                                                <button
                                                    class="text-slate-400 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-colors">
                                                    <span
                                                        class="material-symbols-outlined !text-xl">expand_circle_down</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- VP Marketing -->
                            <div class="relative flex flex-col items-center pt-8">
                                <div class="absolute top-0 h-8 org-line-v"></div>
                                <div class="glass-panel org-card group relative rounded-2xl p-5 shadow-neon-purple border border-white/5 border-neon-purple/50 ring-1 ring-white/5 backdrop-blur-xl transition-all duration-300 w-80"
                                    data-employee-id="emp_003" data-department="Marketing">
                                    <div
                                        class="absolute inset-0 rounded-2xl bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                    </div>
                                    <div class="relative z-10 flex items-center gap-4">
                                        <div class="relative">
                                            <div
                                                class="h-16 w-16 rounded-2xl bg-center bg-no-repeat bg-cover shadow-lg ring-2 ring-white/10 marcus-thorne-bg">
                                            </div>
                                            <div
                                                class="absolute -bottom-1 -right-1 h-4 w-4 rounded-full bg-emerald-500 border-2 border-slate-800">
                                            </div>
                                        </div>
                                        <div class="flex-1 overflow-hidden">
                                            <div
                                                class="mb-1 inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[9px] font-bold border border-white/10 text-neon-purple bg-white/5">
                                                <div class="w-1 h-1 rounded-full bg-current"></div> MARKETING
                                            </div>
                                            <p class="truncate text-lg font-bold text-white employee-name">Marcus Thorne
                                            </p>
                                            <p class="truncate text-sm text-slate-400 employee-title">VP of Marketing
                                            </p>
                                        </div>
                                    </div>
                                    <div
                                        class="relative z-10 mt-5 flex items-center justify-between border-t border-white/5 pt-4">
                                        <div
                                            class="flex items-center gap-1.5 rounded-full bg-white/5 px-3 py-1.5 border border-white/5">
                                            <span
                                                class="material-symbols-outlined !text-sm text-neon-purple">supervisor_account</span>
                                            <span class="text-xs font-medium text-slate-300">12 Directs</span>
                                        </div>
                                        <button
                                            class="text-slate-400 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-colors">
                                            <span class="material-symbols-outlined !text-xl">expand_more</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- VP Operations -->
                            <div class="relative flex flex-col items-center pt-8">
                                <div class="absolute top-0 h-8 org-line-v"></div>
                                <div class="glass-panel org-card group relative rounded-2xl p-5 shadow-neon-orange border border-white/5 border-neon-orange/50 ring-1 ring-white/5 backdrop-blur-xl transition-all duration-300 w-80"
                                    data-employee-id="emp_004" data-department="Operations">
                                    <div
                                        class="absolute inset-0 rounded-2xl bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                    </div>
                                    <div class="relative z-10 flex items-center gap-4">
                                        <div class="relative">
                                            <div
                                                class="h-16 w-16 rounded-2xl bg-center bg-no-repeat bg-cover shadow-lg ring-2 ring-white/10 alicia-vance-bg">
                                            </div>
                                            <div
                                                class="absolute -bottom-1 -right-1 h-4 w-4 rounded-full bg-emerald-500 border-2 border-slate-800">
                                            </div>
                                        </div>
                                        <div class="flex-1 overflow-hidden">
                                            <div
                                                class="mb-1 inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[9px] font-bold border border-white/10 text-neon-orange bg-white/5">
                                                <div class="w-1 h-1 rounded-full bg-current"></div> OPERATIONS
                                            </div>
                                            <p class="truncate text-lg font-bold text-white employee-name">Alicia Vance
                                            </p>
                                            <p class="truncate text-sm text-slate-400 employee-title">VP of Operations
                                            </p>
                                        </div>
                                    </div>
                                    <div
                                        class="relative z-10 mt-5 flex items-center justify-between border-t border-white/5 pt-4">
                                        <div
                                            class="flex items-center gap-1.5 rounded-full bg-white/5 px-3 py-1.5 border border-white/5">
                                            <span
                                                class="material-symbols-outlined !text-sm text-neon-orange">supervisor_account</span>
                                            <span class="text-xs font-medium text-slate-300">5 Directs</span>
                                        </div>
                                        <button
                                            class="text-slate-400 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-colors">
                                            <span class="material-symbols-outlined !text-xl">expand_more</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Canvas Toolbar -->
                <div id="oc-canvas-toolbar" class="fixed bottom-6 right-64 z-50 flex gap-2">
                    <button id="oc-toggle-dots"
                        class="flex items-center justify-center w-9 h-9 rounded-lg bg-slate-800/80 border border-slate-700 text-indigo-400 hover:bg-slate-700 hover:text-white transition-all backdrop-blur-sm shadow-lg"
                        title="Toggle dot grid">
                        <span class="material-symbols-outlined !text-lg">grid_on</span>
                    </button>
                    <div class="w-px bg-slate-700"></div>
                    <button id="oc-zoom-out"
                        class="flex items-center justify-center w-9 h-9 rounded-lg bg-slate-800/80 border border-slate-700 text-slate-400 hover:bg-slate-700 hover:text-white transition-all backdrop-blur-sm shadow-lg"
                        title="Zoom out (−)">
                        <span class="material-symbols-outlined !text-lg">remove</span>
                    </button>
                    <button id="oc-zoom-reset"
                        class="flex items-center justify-center h-9 px-2.5 rounded-lg bg-slate-800/80 border border-slate-700 text-slate-300 hover:bg-slate-700 hover:text-white transition-all backdrop-blur-sm shadow-lg text-xs font-semibold min-w-[3rem] tabular-nums"
                        title="Reset zoom to 100%">
                        <span id="oc-zoom-label">100%</span>
                    </button>
                    <button id="oc-zoom-in"
                        class="flex items-center justify-center w-9 h-9 rounded-lg bg-slate-800/80 border border-slate-700 text-slate-400 hover:bg-slate-700 hover:text-white transition-all backdrop-blur-sm shadow-lg"
                        title="Zoom in (+)">
                        <span class="material-symbols-outlined !text-lg">add</span>
                    </button>
                    <div class="w-px bg-slate-700"></div>
                    <button id="oc-fit-view"
                        class="flex items-center justify-center w-9 h-9 rounded-lg bg-slate-800/80 border border-slate-700 text-indigo-400 hover:bg-slate-700 hover:text-white transition-all backdrop-blur-sm shadow-lg"
                        title="Fit to screen">
                        <span class="material-symbols-outlined !text-lg">fit_screen</span>
                    </button>
                    <button id="oc-center-view"
                        class="flex items-center justify-center w-9 h-9 rounded-lg bg-slate-800/80 border border-slate-700 text-indigo-400 hover:bg-slate-700 hover:text-white transition-all backdrop-blur-sm shadow-lg"
                        title="Center tree">
                        <span class="material-symbols-outlined !text-lg">center_focus_strong</span>
                    </button>
                </div>

                <!-- Minimap -->
                <div id="oc-minimap-wrapper" class="absolute bottom-6 right-6 z-50">
                    <div id="oc-minimap"
                        class="glass-panel minimap rounded-xl overflow-hidden shadow-2xl flex flex-col relative group w-48 h-32 opacity-70 cursor-pointer">
                        <div class="absolute inset-0 bg-slate-900/80"></div>
                        <div class="relative w-full h-full p-4 flex items-center justify-center">
                            <div class="flex flex-col items-center gap-1">
                                <div class="w-6 h-4 bg-indigo-500 rounded-sm"></div>
                                <div class="w-0.5 h-2 bg-slate-500"></div>
                                <div class="flex gap-1">
                                    <div class="w-4 h-3 bg-cyan-500 rounded-sm"></div>
                                    <div class="w-4 h-3 bg-purple-500 rounded-sm"></div>
                                    <div class="w-4 h-3 bg-orange-500 rounded-sm"></div>
                                </div>
                            </div>
                            <div id="oc-minimap-viewport"
                                class="absolute border-2 border-white/70 rounded-sm oc-minimap-viewport-indicator">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employee Directory Page (sibling of main, shares flex with sidebar) -->
        <div id="page-employee-directory" class="page-section page-section-layout hidden">
            <div
                class="flex flex-1 justify-center py-5 px-4 md:px-10 lg:px-20 xl:px-40 bg-background-light dark:bg-background-dark min-h-full">
                <div class="layout-content-container flex flex-col max-w-[1200px] flex-1">
                    <!-- Page Heading -->
                    <div class="flex flex-wrap justify-between items-end gap-4 p-4 mb-2">
                        <div class="flex min-w-72 flex-col gap-2">
                            <h1
                                class="text-[#111418] dark:text-white text-4xl font-black leading-tight tracking-[-0.033em]">
                                Employee Directory</h1>
                            <p class="text-[#637588] dark:text-[#9dabb9] text-base font-normal leading-normal">Manage
                                your
                                team, update roles, and view organizational structures.</p>
                        </div>
                        <button id="ed-add-btn"
                            class="auth-required flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary hover:bg-blue-600 text-white text-sm font-bold leading-normal tracking-[0.015em] transition-colors shadow-lg shadow-blue-500/20">
                            <span class="material-symbols-outlined mr-2 text-xl">person_add</span>
                            <span class="truncate">Add Employee</span>
                        </button>
                    </div>

                    <!-- Action Toolbar -->
                    <div
                        class="flex flex-col lg:flex-row justify-between items-stretch lg:items-center gap-4 px-4 py-3 bg-white dark:bg-[#1c2127] rounded-xl border border-[#e5e7eb] dark:border-[#283039] mb-6 shadow-sm">
                        <div class="flex flex-1 flex-col sm:flex-row gap-4">
                            <label class="flex flex-col min-w-60 flex-1 max-w-md relative group">
                                <span
                                    class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-[#9dabb9] group-focus-within:text-primary transition-colors">search</span>
                                <input id="ed-search"
                                    class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] h-12 placeholder:text-[#9dabb9] pl-12 pr-4 text-sm font-normal leading-normal transition-all"
                                    placeholder="Search by name, role, or ID" value="" />
                            </label>
                            <div class="flex gap-4">
                                <label class="flex flex-col min-w-40 flex-1 sm:flex-none">
                                    <div class="relative">
                                        <select id="ed-filter-dept"
                                            class="form-select w-full appearance-none rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-12 px-4 pr-10 text-sm focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all cursor-pointer">
                                            <option value="">All Departments</option>
                                            <!-- Populated dynamically by DepartmentStore -->
                                        </select>
                                        <span
                                            class="material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-[#9dabb9] pointer-events-none">expand_more</span>
                                    </div>
                                </label>
                                <label class="flex flex-col min-w-40 flex-1 sm:flex-none">
                                    <div class="relative">
                                        <select id="ed-filter-loc"
                                            class="form-select w-full appearance-none rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-12 px-4 pr-10 text-sm focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all cursor-pointer">
                                            <option value="">All Locations</option>
                                            <option value="Cebu">Cebu, Philippines</option>
                                            <option value="Metro Manila">Metro Manila, Philippines</option>
                                            <option value="Armenia">Armenia</option>
                                        </select>
                                        <span
                                            class="material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-[#9dabb9] pointer-events-none">expand_more</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <!-- Bulk Actions -->
                        <div
                            class="auth-required flex items-center gap-2 border-t border-[#e5e7eb] dark:border-[#3b4754] pt-3 lg:pt-0 lg:border-t-0 lg:border-l lg:pl-4">
                            <span
                                class="text-xs font-medium text-[#637588] dark:text-[#9dabb9] uppercase tracking-wider mr-2 hidden xl:block">Bulk
                                Actions</span>
                            <button id="ed-import-btn"
                                class="flex cursor-pointer items-center justify-center rounded-lg h-9 px-3 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-xs font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                                <span class="material-symbols-outlined text-sm mr-1.5">upload_file</span> Import
                            </button>
                            <button id="ed-export-btn"
                                class="flex cursor-pointer items-center justify-center rounded-lg h-9 px-3 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-xs font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                                <span class="material-symbols-outlined text-sm mr-1.5">download</span> Export
                            </button>
                            <button id="ed-deactivate-btn" disabled
                                class="flex cursor-pointer items-center justify-center rounded-lg h-9 px-3 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-red-500 dark:text-red-400 text-xs font-bold transition-colors border border-transparent dark:border-[#3b4754] disabled:opacity-40 disabled:cursor-not-allowed">
                                <span class="material-symbols-outlined text-sm mr-1.5">block</span> Deactivate
                            </button>
                        </div>
                    </div>

                    <!-- Show Inactive Toggle -->
                    <div class="px-4 pb-2 flex items-center gap-2">
                        <label
                            class="flex items-center gap-2 text-xs text-[#637588] dark:text-[#9dabb9] cursor-pointer select-none">
                            <input id="ed-show-inactive" type="checkbox"
                                class="form-checkbox rounded border-gray-300 dark:border-gray-600 bg-transparent text-primary focus:ring-primary/50 size-3.5 cursor-pointer" />
                            Show inactive employees
                        </label>
                    </div>

                    <!-- Data Table -->
                    <div class="px-4 py-3">
                        <div
                            class="flex flex-col overflow-hidden rounded-xl border border-[#e5e7eb] dark:border-[#3b4754] bg-white dark:bg-[#111418] shadow-sm">
                            <div class="overflow-x-auto">
                                <table class="flex-1 w-full min-w-[800px] border-collapse">
                                    <thead class="sticky top-0 z-10">
                                        <tr
                                            class="bg-[#f9fafb] dark:bg-[#1c2127] border-b border-[#e5e7eb] dark:border-[#283039]">
                                            <th class="w-12 px-4 py-3 text-center">
                                                <input id="ed-select-all" aria-label="Select all employees"
                                                    class="form-checkbox rounded border-gray-300 dark:border-gray-600 bg-white dark:bg-[#111418] text-primary focus:ring-primary/50 size-4 cursor-pointer"
                                                    type="checkbox" />
                                            </th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Name</th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Gender</th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Department</th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Phone</th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Location</th>
                                            <th
                                                class="px-4 py-3 text-center text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Start Date</th>
                                            <th class="w-20 px-4 py-3"></th>
                                        </tr>
                                    </thead>
                                    <tbody id="ed-table-body">
                                        <!-- Rows rendered by JS -->
                                    </tbody>
                                </table>
                            </div>
                            <!-- Pagination -->
                            <div
                                class="flex items-center justify-between border-t border-[#e5e7eb] dark:border-[#283039] px-4 py-3 bg-white dark:bg-[#1c2127]">
                                <div class="flex flex-1 items-center">
                                    <p id="ed-result-count" class="text-sm text-[#637588] dark:text-[#9dabb9]">Showing
                                        results</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employee Add/Edit Modal -->
        <div id="ed-modal" class="hidden fixed inset-0 z-[90] items-center justify-center bg-black/60 backdrop-blur-sm">
            <div
                class="bg-white dark:bg-[#1c2127] rounded-2xl shadow-2xl w-full max-w-lg mx-4 border border-[#e5e7eb] dark:border-[#3b4754] overflow-hidden">
                <div
                    class="flex items-center justify-between px-6 py-4 border-b border-[#e5e7eb] dark:border-[#283039]">
                    <h3 id="ed-modal-title" class="text-lg font-bold text-[#111418] dark:text-white">Add New Employee
                    </h3>
                    <button id="ed-modal-close"
                        class="text-[#637588] dark:text-[#9dabb9] hover:text-[#111418] dark:hover:text-white transition-colors">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
                <form id="ed-form" class="p-6 space-y-4">
                    <!-- Avatar Upload -->
                    <div class="flex flex-col items-center gap-2 mb-2">
                        <label for="ed-field-avatar" class="cursor-pointer group relative">
                            <div id="ed-avatar-preview"
                                class="size-20 rounded-full bg-[#f0f2f4] dark:bg-[#283039] bg-center bg-no-repeat bg-cover ring-2 ring-[#e5e7eb] dark:ring-[#3b4754] group-hover:ring-primary transition-all flex items-center justify-center overflow-hidden">
                                <span id="ed-avatar-placeholder"
                                    class="material-symbols-outlined text-3xl text-[#9dabb9]">person</span>
                            </div>
                            <div
                                class="absolute bottom-0 right-0 size-7 rounded-full bg-primary text-white flex items-center justify-center ring-2 ring-white dark:ring-[#1c2127] group-hover:scale-110 transition-transform">
                                <span class="material-symbols-outlined text-sm">photo_camera</span>
                            </div>
                        </label>
                        <input id="ed-field-avatar" type="file" accept="image/*" class="hidden" />
                        <span class="text-xs text-[#637588] dark:text-[#9dabb9]">Click to upload photo</span>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="col-span-2 sm:col-span-1">
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="ed-field-name">Full Name *</label>
                            <input id="ed-field-name" type="text" required
                                class="form-input w-full rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all"
                                placeholder="John Doe" />
                        </div>
                        <div class="col-span-2 sm:col-span-1">
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="ed-field-email">Email *</label>
                            <input id="ed-field-email" type="email" required
                                class="form-input w-full rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all"
                                placeholder="john@company.com" />
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="ed-field-startdate">Start Date</label>
                            <input id="ed-field-startdate" type="date"
                                class="form-input w-full rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all" />
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="ed-field-gender">Gender</label>
                            <select id="ed-field-gender"
                                class="form-select w-full appearance-none rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all cursor-pointer">
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="ed-field-dept">Department</label>
                            <select id="ed-field-dept"
                                class="form-select w-full appearance-none rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all cursor-pointer">
                                <!-- Populated dynamically by DepartmentStore -->
                            </select>
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="ed-field-phone">Phone</label>
                            <input id="ed-field-phone" type="tel"
                                class="form-input w-full rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all"
                                placeholder="+63 9XX XXX XXXX" />
                        </div>
                    </div>
                    <div>
                        <label
                            class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                            for="ed-field-location">Location</label>
                        <input id="ed-field-location" type="text"
                            class="form-input w-full rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all"
                            placeholder="City, Country" />
                    </div>
                    <div>
                        <label
                            class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                            for="ed-field-status">Status</label>
                        <select id="ed-field-status"
                            class="form-select w-full appearance-none rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all cursor-pointer">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="flex justify-end gap-3 pt-4 border-t border-[#e5e7eb] dark:border-[#283039]">
                        <button id="ed-modal-cancel" type="button"
                            class="rounded-lg h-10 px-5 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-sm font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                            Cancel
                        </button>
                        <button type="submit"
                            class="rounded-lg h-10 px-5 bg-primary hover:bg-blue-600 text-white text-sm font-bold transition-colors shadow-lg shadow-blue-500/20">
                            Save Employee
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Deactivate Confirmation Modal -->
        <div id="ed-deactivate-modal"
            class="hidden fixed inset-0 z-[100] items-center justify-center bg-black/60 backdrop-blur-sm">
            <div
                class="bg-white dark:bg-[#1c2127] rounded-2xl shadow-2xl w-full max-w-md mx-4 border border-[#e5e7eb] dark:border-[#3b4754] p-6">
                <div class="flex items-center gap-4 mb-4">
                    <div class="flex items-center justify-center size-12 rounded-xl bg-red-500/10 flex-shrink-0">
                        <span class="material-symbols-outlined text-red-500 text-2xl">block</span>
                    </div>
                    <div>
                        <h3 class="text-base font-bold text-[#111418] dark:text-white">Deactivate Employees</h3>
                        <p id="ed-deactivate-modal-msg" class="text-sm text-[#637588] dark:text-[#9dabb9] mt-0.5">This
                            will deactivate the selected employees.</p>
                    </div>
                </div>
                <p class="text-sm text-[#637588] dark:text-[#9dabb9] mb-6">Deactivated employees will be hidden from the
                    directory and greyed out on the org chart. You can reactivate them at any time.</p>
                <div class="flex justify-end gap-3">
                    <button id="ed-deactivate-modal-cancel"
                        class="rounded-lg h-10 px-5 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-sm font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                        Cancel
                    </button>
                    <button id="ed-deactivate-modal-confirm"
                        class="rounded-lg h-10 px-5 bg-red-500 hover:bg-red-600 text-white text-sm font-bold transition-colors shadow-lg shadow-red-500/20">
                        Deactivate
                    </button>
                </div>
            </div>
        </div>

        <!-- Employee Import Modal -->
        <div id="ed-import-modal"
            class="hidden fixed inset-0 z-[90] items-center justify-center bg-black/60 backdrop-blur-sm">
            <div
                class="bg-white dark:bg-[#1c2127] rounded-2xl shadow-2xl w-full max-w-2xl mx-4 border border-[#e5e7eb] dark:border-[#3b4754] overflow-hidden max-h-[90vh] flex flex-col">
                <!-- Modal Header -->
                <div
                    class="flex items-center justify-between px-6 py-4 border-b border-[#e5e7eb] dark:border-[#283039] flex-shrink-0">
                    <div class="flex items-center gap-3">
                        <div class="flex items-center justify-center size-10 rounded-xl bg-primary/10">
                            <span class="material-symbols-outlined text-primary text-xl">upload_file</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-[#111418] dark:text-white">Import Employees</h3>
                            <p id="ed-import-step-label" class="text-xs text-[#637588] dark:text-[#9dabb9]">Step 1 of 2
                                — Upload file</p>
                        </div>
                    </div>
                    <button id="ed-import-close"
                        class="text-[#637588] dark:text-[#9dabb9] hover:text-[#111418] dark:hover:text-white transition-colors">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>

                <!-- Step 1: Upload -->
                <div id="ed-import-step1" class="p-6 overflow-y-auto">
                    <div id="ed-import-dropzone"
                        class="border-2 border-dashed border-[#e5e7eb] dark:border-[#3b4754] rounded-xl p-10 text-center cursor-pointer hover:border-primary hover:bg-primary/5 dark:hover:bg-primary/5 transition-all group">
                        <div class="flex flex-col items-center gap-3">
                            <div
                                class="size-16 rounded-2xl bg-[#f0f2f4] dark:bg-[#283039] flex items-center justify-center group-hover:bg-primary/10 transition-colors">
                                <span
                                    class="material-symbols-outlined text-3xl text-[#9dabb9] group-hover:text-primary transition-colors">cloud_upload</span>
                            </div>
                            <div>
                                <p class="text-sm font-semibold text-[#111418] dark:text-white mb-1">Drop your file
                                    here, or <span class="text-primary">browse</span></p>
                                <p class="text-xs text-[#637588] dark:text-[#9dabb9]">Supports CSV, XLSX, and XLS files
                                </p>
                            </div>
                        </div>
                    </div>
                    <input id="ed-import-file" aria-label="Import file input" type="file" accept=".csv,.xlsx,.xls"
                        class="hidden" />
                    <div id="ed-import-file-info"
                        class="hidden mt-4 flex items-center gap-3 p-3 bg-[#f9fafb] dark:bg-[#111418] rounded-lg border border-[#e5e7eb] dark:border-[#3b4754]">
                        <span class="material-symbols-outlined text-green-500 text-xl">description</span>
                        <div class="flex-1 min-w-0">
                            <p id="ed-import-filename"
                                class="text-sm font-semibold text-[#111418] dark:text-white truncate"></p>
                            <p id="ed-import-filesize" class="text-xs text-[#637588] dark:text-[#9dabb9]"></p>
                        </div>
                        <button id="ed-import-file-remove" type="button"
                            class="text-[#9dabb9] hover:text-red-500 transition-colors">
                            <span class="material-symbols-outlined text-lg">close</span>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Preview & Column Mapping -->
                <div id="ed-import-step2" class="hidden p-6 overflow-y-auto flex-1">
                    <div class="mb-4">
                        <h4 class="text-sm font-bold text-[#111418] dark:text-white mb-1">Column Mapping</h4>
                        <p class="text-xs text-[#637588] dark:text-[#9dabb9]">We auto-detected your columns. Adjust the
                            mapping if needed.</p>
                    </div>
                    <div id="ed-import-mapping" class="grid grid-cols-2 gap-3 mb-5"></div>
                    <div class="mb-3">
                        <h4 class="text-sm font-bold text-[#111418] dark:text-white mb-2">Preview (first 5 rows)</h4>
                    </div>
                    <div class="overflow-x-auto rounded-lg border border-[#e5e7eb] dark:border-[#3b4754]">
                        <table class="w-full text-sm border-collapse min-w-[500px]">
                            <thead>
                                <tr id="ed-import-preview-head"
                                    class="bg-[#f9fafb] dark:bg-[#1c2127] border-b border-[#e5e7eb] dark:border-[#283039]">
                                </tr>
                            </thead>
                            <tbody id="ed-import-preview-body"></tbody>
                        </table>
                    </div>
                    <div id="ed-import-summary"
                        class="mt-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800/40">
                        <p class="text-sm text-indigo-800 dark:text-indigo-300 font-semibold">
                            <span class="material-symbols-outlined text-sm align-middle mr-1">group_add</span>
                            <span id="ed-import-count">0</span> employees will be imported
                        </p>
                    </div>
                </div>

                <!-- Modal Footer -->
                <div
                    class="flex items-center justify-between px-6 py-4 border-t border-[#e5e7eb] dark:border-[#283039] bg-[#f9fafb] dark:bg-[#111418] flex-shrink-0">
                    <button id="ed-import-back" type="button"
                        class="hidden rounded-lg h-10 px-5 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-sm font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                        Back
                    </button>
                    <div class="flex-1"></div>
                    <div class="flex gap-3">
                        <button id="ed-import-cancel" type="button"
                            class="rounded-lg h-10 px-5 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-sm font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                            Cancel
                        </button>
                        <button id="ed-import-next" type="button" disabled
                            class="rounded-lg h-10 px-5 bg-primary hover:bg-blue-600 disabled:opacity-40 disabled:cursor-not-allowed text-white text-sm font-bold transition-colors shadow-lg shadow-blue-500/20">
                            Next
                        </button>
                        <button id="ed-import-confirm" type="button"
                            class="hidden rounded-lg h-10 px-5 bg-green-600 hover:bg-green-700 text-white text-sm font-bold transition-colors shadow-lg shadow-green-500/20">
                            <span class="material-symbols-outlined text-sm mr-1 align-middle">check_circle</span>
                            Import All
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="ed-delete-modal"
            class="hidden fixed inset-0 z-[90] items-center justify-center bg-black/60 backdrop-blur-sm">
            <div
                class="bg-white dark:bg-[#1c2127] rounded-2xl shadow-2xl w-full max-w-sm mx-4 border border-[#e5e7eb] dark:border-[#3b4754] p-6 text-center">
                <div
                    class="flex items-center justify-center w-14 h-14 rounded-full bg-red-100 dark:bg-red-900/30 mx-auto mb-4">
                    <span class="material-symbols-outlined text-red-600 dark:text-red-400 text-3xl">warning</span>
                </div>
                <h3 class="text-lg font-bold text-[#111418] dark:text-white mb-2">Delete Employee</h3>
                <p class="text-sm text-[#637588] dark:text-[#9dabb9] mb-6">Are you sure you want to remove <span
                        id="ed-delete-name" class="font-semibold text-[#111418] dark:text-white"></span>? This action
                    cannot
                    be undone.</p>
                <div class="flex gap-3 justify-center">
                    <button id="ed-delete-cancel"
                        class="rounded-lg h-10 px-5 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-sm font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                        Cancel
                    </button>
                    <button id="ed-delete-confirm"
                        class="rounded-lg h-10 px-5 bg-red-600 hover:bg-red-700 text-white text-sm font-bold transition-colors shadow-lg shadow-red-500/20">
                        Delete
                    </button>
                </div>
            </div>
        </div>

        <!-- ================================================================ -->
        <!-- User Management Page                                             -->
        <!-- ================================================================ -->
        <div id="page-users" class="page-section page-section-layout hidden">
            <div
                class="flex flex-1 justify-center py-5 px-4 md:px-10 lg:px-20 xl:px-40 bg-background-light dark:bg-background-dark min-h-full">
                <div class="layout-content-container flex flex-col max-w-[1200px] flex-1">
                    <!-- Page Heading -->
                    <div class="flex flex-wrap justify-between items-end gap-4 p-4 mb-2">
                        <div class="flex min-w-72 flex-col gap-2">
                            <h1
                                class="text-[#111418] dark:text-white text-4xl font-black leading-tight tracking-[-0.033em]">
                                User Management</h1>
                            <p class="text-[#637588] dark:text-[#9dabb9] text-base font-normal leading-normal">Manage
                                admin users who can add, edit, and update organizational data.</p>
                        </div>
                        <button id="um-add-btn"
                            class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary hover:bg-blue-600 text-white text-sm font-bold leading-normal tracking-[0.015em] transition-colors shadow-lg shadow-blue-500/20">
                            <span class="material-symbols-outlined mr-2 text-xl">person_add</span>
                            <span class="truncate">Add User</span>
                        </button>
                    </div>

                    <!-- Action Toolbar -->
                    <div
                        class="flex flex-col lg:flex-row justify-between items-stretch lg:items-center gap-4 px-4 py-3 bg-white dark:bg-[#1c2127] rounded-xl border border-[#e5e7eb] dark:border-[#283039] mb-6 shadow-sm">
                        <div class="flex flex-1 flex-col sm:flex-row gap-4">
                            <label class="flex flex-col min-w-60 flex-1 max-w-md relative group">
                                <span
                                    class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-[#9dabb9] group-focus-within:text-primary transition-colors">search</span>
                                <input id="um-search"
                                    class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] h-12 placeholder:text-[#9dabb9] pl-12 pr-4 text-sm font-normal leading-normal transition-all"
                                    placeholder="Search by name or email" value="" />
                            </label>
                            <div class="flex gap-4">
                                <label class="flex flex-col min-w-40 flex-1 sm:flex-none">
                                    <div class="relative">
                                        <select id="um-filter-role"
                                            class="form-select w-full appearance-none rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-12 px-4 pr-10 text-sm focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all cursor-pointer">
                                            <option value="">All Roles</option>
                                            <option value="Super Admin">Super Admin</option>
                                            <option value="Admin">Admin</option>
                                            <option value="Viewer">Viewer</option>
                                        </select>
                                        <span
                                            class="material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-[#9dabb9] pointer-events-none">expand_more</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Data Table -->
                    <div class="px-4 py-3">
                        <div
                            class="flex flex-col overflow-hidden rounded-xl border border-[#e5e7eb] dark:border-[#3b4754] bg-white dark:bg-[#111418] shadow-sm">
                            <div class="overflow-x-auto">
                                <table class="flex-1 w-full min-w-[700px] border-collapse">
                                    <thead class="sticky top-0 z-10">
                                        <tr
                                            class="bg-[#f9fafb] dark:bg-[#1c2127] border-b border-[#e5e7eb] dark:border-[#283039]">
                                            <th class="w-12 px-4 py-3 text-center">
                                                <input id="um-select-all" aria-label="Select all admin users"
                                                    class="form-checkbox rounded border-gray-300 dark:border-gray-600 bg-white dark:bg-[#111418] text-primary focus:ring-primary/50 size-4 cursor-pointer"
                                                    type="checkbox" />
                                            </th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                User</th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Role</th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Status</th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Last Login</th>
                                            <th
                                                class="px-4 py-3 text-left text-[#637588] dark:text-[#9dabb9] text-xs font-semibold uppercase tracking-wider">
                                                Created</th>
                                            <th class="w-24 px-4 py-3"></th>
                                        </tr>
                                    </thead>
                                    <tbody id="um-table-body">
                                        <!-- Rows rendered by JS -->
                                    </tbody>
                                </table>
                            </div>
                            <!-- Pagination -->
                            <div
                                class="flex items-center justify-between border-t border-[#e5e7eb] dark:border-[#283039] px-4 py-3 bg-white dark:bg-[#1c2127]">
                                <div class="flex flex-1 items-center">
                                    <p id="um-result-count" class="text-sm text-[#637588] dark:text-[#9dabb9]">Showing
                                        results</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Add/Edit Modal -->
        <div id="um-modal" class="hidden fixed inset-0 z-[90] items-center justify-center bg-black/60 backdrop-blur-sm">
            <div
                class="bg-white dark:bg-[#1c2127] rounded-2xl shadow-2xl w-full max-w-lg mx-4 border border-[#e5e7eb] dark:border-[#3b4754] overflow-hidden">
                <div
                    class="flex items-center justify-between px-6 py-4 border-b border-[#e5e7eb] dark:border-[#283039]">
                    <h3 id="um-modal-title" class="text-lg font-bold text-[#111418] dark:text-white">Add New User</h3>
                    <button id="um-modal-close"
                        class="text-[#637588] dark:text-[#9dabb9] hover:text-[#111418] dark:hover:text-white transition-colors">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
                <form id="um-form" class="p-6 space-y-4">
                    <!-- Avatar Upload -->
                    <div class="flex flex-col items-center gap-2 mb-2">
                        <label for="um-field-avatar" class="cursor-pointer group relative">
                            <div id="um-avatar-preview"
                                class="size-20 rounded-full bg-[#f0f2f4] dark:bg-[#283039] bg-center bg-no-repeat bg-cover ring-2 ring-[#e5e7eb] dark:ring-[#3b4754] group-hover:ring-primary transition-all flex items-center justify-center overflow-hidden">
                                <span id="um-avatar-placeholder"
                                    class="material-symbols-outlined text-3xl text-[#9dabb9]">person</span>
                            </div>
                            <div
                                class="absolute bottom-0 right-0 size-7 rounded-full bg-primary text-white flex items-center justify-center ring-2 ring-white dark:ring-[#1c2127] group-hover:scale-110 transition-transform">
                                <span class="material-symbols-outlined text-sm">photo_camera</span>
                            </div>
                        </label>
                        <input id="um-field-avatar" type="file" accept="image/*" class="hidden" />
                        <span class="text-xs text-[#637588] dark:text-[#9dabb9]">Click to upload photo</span>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="col-span-2 sm:col-span-1">
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="um-field-name">Full Name *</label>
                            <input id="um-field-name" type="text" required
                                class="form-input w-full rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all"
                                placeholder="Jane Doe" />
                        </div>
                        <div class="col-span-2 sm:col-span-1">
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="um-field-email">Email *</label>
                            <input id="um-field-email" type="email" required
                                class="form-input w-full rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all"
                                placeholder="jane@company.com" />
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="um-field-role">Role *</label>
                            <select id="um-field-role"
                                class="form-select w-full appearance-none rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all cursor-pointer">
                                <option value="Super Admin">Super Admin</option>
                                <option value="Admin" selected>Admin</option>
                                <option value="Viewer">Viewer</option>
                            </select>
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                                for="um-field-status">Status</label>
                            <select id="um-field-status"
                                class="form-select w-full appearance-none rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all cursor-pointer">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="suspended">Suspended</option>
                            </select>
                        </div>
                    </div>
                    <!-- Password field -->
                    <div class="col-span-2">
                        <label
                            class="block text-xs font-semibold text-[#637588] dark:text-[#9dabb9] mb-1.5 uppercase tracking-wider"
                            for="um-field-password">Password <span id="um-password-hint"
                                class="normal-case text-[#9dabb9] font-normal">(leave blank to keep
                                existing)</span></label>
                        <input id="um-field-password" type="password"
                            class="form-input w-full rounded-lg border border-[#e5e7eb] dark:border-[#3b4754] bg-[#f9fafb] dark:bg-[#111418] text-[#111418] dark:text-white h-10 px-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-all"
                            placeholder="Set login password" autocomplete="new-password" />
                    </div>
                    <div class="flex justify-end gap-3 pt-4 border-t border-[#e5e7eb] dark:border-[#283039]">
                        <button id="um-modal-cancel" type="button"
                            class="rounded-lg h-10 px-5 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-sm font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                            Cancel
                        </button>
                        <button type="submit"
                            class="rounded-lg h-10 px-5 bg-primary hover:bg-blue-600 text-white text-sm font-bold transition-colors shadow-lg shadow-blue-500/20">
                            Save User
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- User Delete Confirmation Modal -->
        <div id="um-delete-modal"
            class="hidden fixed inset-0 z-[90] items-center justify-center bg-black/60 backdrop-blur-sm">
            <div
                class="bg-white dark:bg-[#1c2127] rounded-2xl shadow-2xl w-full max-w-sm mx-4 border border-[#e5e7eb] dark:border-[#3b4754] p-6 text-center">
                <div
                    class="flex items-center justify-center w-14 h-14 rounded-full bg-red-100 dark:bg-red-900/30 mx-auto mb-4">
                    <span class="material-symbols-outlined text-red-600 dark:text-red-400 text-3xl">warning</span>
                </div>
                <h3 class="text-lg font-bold text-[#111418] dark:text-white mb-2">Remove Admin User</h3>
                <p class="text-sm text-[#637588] dark:text-[#9dabb9] mb-6">Are you sure you want to remove <span
                        id="um-delete-name" class="font-semibold text-[#111418] dark:text-white"></span>? They will lose
                    all admin access.</p>
                <div class="flex gap-3 justify-center">
                    <button id="um-delete-cancel"
                        class="rounded-lg h-10 px-5 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-sm font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                        Cancel
                    </button>
                    <button id="um-delete-confirm"
                        class="rounded-lg h-10 px-5 bg-red-600 hover:bg-red-700 text-white text-sm font-bold transition-colors shadow-lg shadow-red-500/20">
                        Remove
                    </button>
                </div>
            </div>

        </div>

        <!-- Audit Log Modal -->
        <div id="audit-log-modal"
            class="hidden fixed inset-0 z-[100] items-center justify-center bg-black/60 backdrop-blur-sm">
            <div
                class="bg-white dark:bg-[#1c2127] rounded-2xl shadow-2xl w-full max-w-2xl mx-4 border border-[#e5e7eb] dark:border-[#3b4754] overflow-hidden max-h-[80vh] flex flex-col">
                <div
                    class="flex items-center justify-between px-6 py-4 border-b border-[#e5e7eb] dark:border-[#283039] flex-shrink-0">
                    <div class="flex items-center gap-3">
                        <div class="flex items-center justify-center size-10 rounded-xl bg-indigo-500/10">
                            <span class="material-symbols-outlined text-indigo-500 text-xl">history</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-[#111418] dark:text-white">Full Audit History</h3>
                            <p class="text-xs text-[#637588] dark:text-[#9dabb9]">Comprehensive log of all
                                organizational
                                changes</p>
                        </div>
                    </div>
                    <button id="audit-log-close"
                        class="text-[#637588] dark:text-[#9dabb9] hover:text-[#111418] dark:hover:text-white transition-colors">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto p-4 custom-scrollbar" id="audit-log-content">
                    <!-- Logs will be populated here -->
                </div>
                <div
                    class="px-6 py-4 border-t border-[#e5e7eb] dark:border-[#283039] bg-[#f9fafb] dark:bg-[#111418] flex justify-end">
                    <button id="audit-log-done"
                        class="rounded-lg h-10 px-6 bg-[#f0f2f4] dark:bg-[#283039] hover:bg-[#e5e7eb] dark:hover:bg-[#3b4754] text-[#111418] dark:text-white text-sm font-bold transition-colors border border-transparent dark:border-[#3b4754]">
                        Close
                    </button>
                </div>
            </div>
        </div>

        <!-- ================================================================
             Integrations Page
             ================================================================ -->
        <div id="page-integrations" class="hidden">

            <!-- Header -->
            <div class="integrations-header">
                <div class="flex items-center justify-between">
                    <div>
                        <h1>Integrations</h1>
                        <p>Connect external tools to sync employee data automatically.</p>
                    </div>
                    <div id="int-connection-badge" class="int-status-badge disconnected">
                        <span class="int-status-dot"></span>
                        <span id="int-badge-label">Not connected</span>
                    </div>
                </div>
            </div>

            <div class="integrations-body">

                <!-- ── Left column: config panels ── -->
                <div>

                    <!-- Integration Cards Grid -->
                    <div class="int-cards-grid" id="int-cards-grid">

                        <!-- Monday.com Card -->
                        <div class="int-app-card" id="int-card-monday">
                            <!-- Logo -->
                            <div class="int-app-card-logo">
                                <span class="monday-logo-dot monday-logo-dot--red"></span>
                                <span class="monday-logo-dot monday-logo-dot--yellow"></span>
                                <span class="monday-logo-dot monday-logo-dot--green"></span>
                            </div>
                            <div class="int-app-card-name">monday.com</div>
                            <div class="int-app-card-desc">Sync employees automatically from your Monday.com board</div>
                            <div id="int-card-status-badge" class="int-app-card-badge disconnected">Not connected</div>
                            <button id="int-card-connect-btn" class="int-app-card-btn">
                                <span class="material-symbols-outlined int-card-connect-icon">cable</span>
                                Connect
                            </button>
                        </div>

                        <!-- Placeholder: future integrations -->
                        <div class="int-app-card int-app-card-soon">
                            <div class="int-app-card-logo int-card-soon-logo">🔲</div>
                            <div class="int-app-card-name int-card-soon-name">More coming</div>
                            <div class="int-app-card-desc">BambooHR, Workday, Google Workspace and more</div>
                            <div class="int-app-card-badge int-card-soon-badge">Coming
                                Soon</div>
                        </div>

                    </div>

                    <!-- Hidden alert (kept for JS compatibility) -->
                    <div id="int-connect-alert" class="int-alert info int-hidden">
                        <span class="material-symbols-outlined">info</span>
                        <span id="int-connect-alert-msg"></span>
                    </div>

                    <!-- Hidden inputs (kept for JS compatibility — values read by monday-integration.js) -->
                    <input id="int-worker-url" type="hidden" />
                    <input id="int-board-id" type="hidden" />
                    <!-- Connect Modal -->
                    <div id="int-connect-modal" class="int-modal-overlay int-hidden">
                        <div class="int-modal-box">
                            <div class="int-modal-header">
                                <div class="int-modal-logo">
                                    <span class="monday-logo-dot--sm monday-logo-dot--red"></span>
                                    <span class="monday-logo-dot--sm monday-logo-dot--yellow"></span>
                                    <span class="monday-logo-dot--sm monday-logo-dot--green"></span>
                                    <span class="int-modal-title-text">monday.com</span>
                                </div>
                                <button id="int-modal-close" class="int-modal-close-btn">
                                    <span class="material-symbols-outlined">close</span>
                                </button>
                            </div>

                            <div id="int-connect-alert" class="int-alert info int-hidden">
                                <span class="material-symbols-outlined">info</span>
                                <span id="int-connect-alert-msg"></span>
                            </div>

                            <div class="int-field">
                                <label for="int-worker-url-real">Cloudflare Worker URL</label>
                                <input id="int-worker-url-real" type="url"
                                    placeholder="https://monday-proxy.your-subdomain.workers.dev"
                                    aria-label="Cloudflare Worker URL" />
                                <div class="int-field-hint">Your deployed Cloudflare Worker that proxies Monday.com API
                                    calls</div>
                            </div>
                            <div class="int-field">
                                <label for="int-board-id-real">Monday.com Board ID</label>
                                <input id="int-board-id-real" type="text" placeholder="e.g. 1234567890"
                                    aria-label="Monday.com Board ID" />
                                <div class="int-field-hint">Found in the board URL:
                                    monday.com/boards/<strong>1234567890</strong></div>
                            </div>

                            <div class="int-modal-actions">
                                <button id="int-connect-btn" class="int-btn-primary">
                                    <span class="material-symbols-outlined !text-base">cable</span>
                                    Connect &amp; Fetch Columns
                                </button>
                                <button id="int-disconnect-btn" class="int-btn-danger int-hidden">
                                    <span class="material-symbols-outlined !text-base">link_off</span>
                                    Disconnect
                                </button>
                                <button id="int-modal-cancel" class="int-btn-secondary">Cancel</button>
                            </div>
                        </div>
                    </div>

                    <!-- Panel 2: Field Mapping (hidden until connected) -->
                    <div class="int-panel" id="int-panel-mapping" class="int-hidden">
                        <h2 class="int-panel-title">
                            <span class="material-symbols-outlined">table_chart</span>
                            Field Mapping
                        </h2>
                        <p class="int-mapping-desc">
                            Map your Monday.com board columns to employee fields.
                            <strong class="int-mapping-required">Email</strong> is required — it's used to match and
                            deduplicate employees.
                        </p>

                        <div class="int-mapping-grid" id="int-mapping-grid">
                            <!-- Populated dynamically by MondayIntegrationUI -->
                        </div>

                        <!-- Group (Table) Filter -->
                        <div id="int-group-filter-section" class="int-group-filter-section int-hidden">
                            <div class="int-group-filter-label">
                                Filter by Table (Group)
                            </div>
                            <p class="int-group-filter-hint">Select which tables to sync.
                                Leave all unchecked to sync the entire board.</p>
                            <div id="int-group-checkboxes" class="int-group-checkboxes">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <div class="flex gap-3 mt-6">
                            <button id="int-save-mapping-btn" class="int-btn-primary">
                                <span class="material-symbols-outlined !text-base">save</span>
                                Save Mapping
                            </button>
                        </div>
                    </div>

                    <!-- Panel 3: Sync Settings (hidden until mapping saved) -->
                    <div class="int-panel" id="int-panel-sync" class="int-hidden">
                        <h2 class="int-panel-title">
                            <span class="material-symbols-outlined">sync</span>
                            Sync Settings
                        </h2>

                        <div id="int-sync-alert" class="int-alert success int-hidden">
                            <span class="material-symbols-outlined">check_circle</span>
                            <span id="int-sync-alert-msg"></span>
                        </div>

                        <!-- Auto-sync toggle -->
                        <div class="int-sync-row">
                            <div>
                                <div class="int-sync-label">Auto-Sync</div>
                                <div class="int-sync-sublabel">Automatically import new and updated employees</div>
                            </div>
                            <label class="int-toggle">
                                <input type="checkbox" id="int-autosync-toggle" aria-label="Auto-Sync" />
                                <span class="int-toggle-slider"></span>
                            </label>
                        </div>

                        <!-- Interval picker -->
                        <div class="int-sync-row" id="int-interval-row">
                            <div>
                                <div class="int-sync-label">Sync Interval</div>
                                <div class="int-sync-sublabel">How often to check for changes</div>
                            </div>
                            <div class="int-interval-group">
                                <label class="int-interval-option">
                                    <input type="radio" name="int-interval" value="3600000" />
                                    Every hour
                                </label>
                                <label class="int-interval-option">
                                    <input type="radio" name="int-interval" value="21600000" checked />
                                    Every 6 hours
                                </label>
                                <label class="int-interval-option">
                                    <input type="radio" name="int-interval" value="86400000" />
                                    Every 24 hours
                                </label>
                            </div>
                        </div>

                        <!-- Last synced -->
                        <div class="int-sync-row">
                            <div>
                                <div class="int-sync-label">Last Synced</div>
                                <div class="int-sync-sublabel" id="int-last-synced">Never</div>
                            </div>
                        </div>

                        <!-- Import Now -->
                        <div class="flex gap-3 mt-4">
                            <button id="int-sync-now-btn" class="int-btn-primary">
                                <span class="material-symbols-outlined !text-base">download</span>
                                Import Now
                            </button>
                        </div>
                    </div>

                </div>

                <!-- ── Right column: stats sidebar ── -->
                <div>

                    <!-- Monday.com branding card -->
                    <div class="int-stat-card int-stat-card--monday">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="int-stat-monday-logo">
                                <span class="monday-logo-dot monday-logo-dot--red"></span>
                                <span class="monday-logo-dot monday-logo-dot--yellow"></span>
                                <span class="monday-logo-dot monday-logo-dot--green"></span>
                            </div>
                            <span class="int-stat-monday-name">monday.com</span>
                        </div>
                        <div class="int-stat-value" id="int-stat-employees">—</div>
                        <div class="int-stat-label">Employees synced</div>
                    </div>

                    <!-- How it works -->
                    <div class="int-stat-card">
                        <h3 class="int-how-it-works-title">How it works</h3>
                        <ol class="int-how-it-works-list">
                            <li class="int-how-it-works-item">
                                <span class="int-how-it-works-step">1</span>
                                <span class="int-how-it-works-text">Deploy the Cloudflare
                                    Worker with your Monday.com API token</span>
                            </li>
                            <li class="int-how-it-works-item">
                                <span class="int-how-it-works-step">2</span>
                                <span class="int-how-it-works-text">Paste the Worker URL and
                                    your Board ID here</span>
                            </li>
                            <li class="int-how-it-works-item">
                                <span class="int-how-it-works-step">3</span>
                                <span class="int-how-it-works-text">Map your board columns
                                    to employee fields</span>
                            </li>
                            <li class="int-how-it-works-item">
                                <span class="int-how-it-works-step">4</span>
                                <span class="int-how-it-works-text">Import now or enable
                                    auto-sync to keep data fresh</span>
                            </li>
                        </ol>
                    </div>

                    <!-- Worker deploy link -->
                    <div class="int-stat-card int-deploy-card">
                        <span class="material-symbols-outlined int-deploy-card-icon">cloud_upload</span>
                        <p class="int-deploy-card-hint">Haven't deployed the Worker yet?
                        </p>
                        <a href="#" id="int-open-readme" class="int-btn-secondary int-deploy-card-link">
                            <span class="material-symbols-outlined !text-base">menu_book</span>
                            View Deploy Guide
                        </a>
                    </div>

                </div>
            </div>
        </div>

        <!-- ================================================================
             Login Modal
             ================================================================ -->
        <div id="auth-modal-overlay" class="auth-modal-overlay" role="dialog" aria-modal="true" aria-label="Sign in">
            <div class="auth-modal" id="auth-modal">
                <!-- Logo -->
                <div class="auth-modal-logo">
                    <div class="auth-modal-logo-icon">
                        <span class="material-symbols-outlined">account_tree</span>
                    </div>
                    <span class="auth-modal-logo-name">Org Analytics</span>
                </div>
                <!-- Close -->
                <button class="auth-modal-close material-symbols-outlined" id="auth-modal-close"
                    aria-label="Close">close</button>
                <!-- Headline -->
                <h2 class="auth-modal-title">Welcome back</h2>
                <p class="auth-modal-subtitle">Sign in to unlock edit access.</p>
                <!-- Error -->
                <div class="auth-error hidden" id="auth-error">
                    <span class="auth-error-icon material-symbols-outlined">error</span>
                    <span id="auth-error-text"></span>
                </div>
                <!-- Form -->
                <form id="auth-login-form" novalidate>
                    <div class="auth-field">
                        <label class="auth-label" for="auth-email">Work Email</label>
                        <input class="auth-input" id="auth-email" type="email" placeholder="name@company.com"
                            autocomplete="email" required />
                    </div>
                    <div class="auth-field">
                        <label class="auth-label" for="auth-password">Password</label>
                        <input class="auth-input" id="auth-password" type="password" placeholder="••••••••"
                            autocomplete="current-password" required />
                    </div>
                    <button class="auth-submit-btn" type="submit" id="auth-submit-btn">Sign In</button>
                </form>
                <!-- Hint -->
                <p class="auth-modal-hint">
                    Only users created in <strong class="auth-modal-hint-accent">User Management</strong> can sign in.
                </p>
            </div>
        </div>

        <!-- ================================================================
             Change Password Modal
             ================================================================ -->
        <div id="chpw-modal-overlay" class="auth-modal-overlay" role="dialog" aria-modal="true"
            aria-label="Change Password">
            <div class="auth-modal" id="chpw-modal">
                <div class="auth-modal-logo">
                    <div class="auth-modal-logo-icon">
                        <span class="material-symbols-outlined">lock_reset</span>
                    </div>
                    <span class="auth-modal-logo-name">Org Analytics</span>
                </div>
                <button class="auth-modal-close material-symbols-outlined" id="chpw-modal-close"
                    aria-label="Close">close</button>
                <h2 class="auth-modal-title">Change Password</h2>
                <p class="auth-modal-subtitle">Enter your current password, then choose a new one.</p>
                <div class="auth-error hidden" id="chpw-error">
                    <span class="auth-error-icon material-symbols-outlined">error</span>
                    <span id="chpw-error-text"></span>
                </div>
                <div class="chpw-success hidden" id="chpw-success">
                    <span class="material-symbols-outlined">check_circle</span>
                    <span>Password updated successfully!</span>
                </div>
                <form id="chpw-form" novalidate>
                    <div class="auth-field">
                        <label class="auth-label" for="chpw-current">Current Password</label>
                        <input class="auth-input" id="chpw-current" type="password" placeholder="••••••••"
                            autocomplete="current-password" required />
                    </div>
                    <div class="auth-field">
                        <label class="auth-label" for="chpw-new">New Password</label>
                        <input class="auth-input" id="chpw-new" type="password" placeholder="Min. 6 characters"
                            autocomplete="new-password" required />
                    </div>
                    <div class="auth-field">
                        <label class="auth-label" for="chpw-confirm">Confirm New Password</label>
                        <input class="auth-input" id="chpw-confirm" type="password" placeholder="Repeat new password"
                            autocomplete="new-password" required />
                    </div>
                    <button class="auth-submit-btn" type="submit" id="chpw-submit-btn">Update Password</button>
                </form>
            </div>
        </div>

        <!-- Share Modal -->
        <div id="oc-share-modal" class="fixed inset-0 z-[200] flex items-center justify-center hidden" aria-modal="true"
            role="dialog">
            <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" id="oc-share-overlay"></div>
            <div
                class="relative glass-panel rounded-2xl p-8 w-full max-w-md mx-4 shadow-2xl border border-white/10 z-10">
                <!-- Header -->
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center gap-3">
                        <div
                            class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/30">
                            <span class="material-symbols-outlined !text-xl">ios_share</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-white">Share Org Chart</h3>
                            <p class="text-xs text-slate-400">Share a link to this view</p>
                        </div>
                    </div>
                    <button id="oc-share-close"
                        class="text-slate-400 hover:text-white hover:bg-white/10 rounded-full p-2 transition-colors">
                        <span class="material-symbols-outlined !text-xl">close</span>
                    </button>
                </div>

                <!-- URL Input + Copy -->
                <div class="flex gap-2 mb-4">
                    <input id="oc-share-url" type="text" readonly aria-label="Share URL"
                        class="flex-1 rounded-lg bg-slate-800/80 border border-white/10 text-slate-300 text-sm px-4 py-2.5 outline-none select-all truncate"
                        value="" />
                    <button id="oc-share-copy"
                        class="flex items-center gap-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 px-4 py-2.5 text-sm font-semibold text-white transition-all whitespace-nowrap">
                        <span class="material-symbols-outlined !text-base" id="oc-copy-icon">content_copy</span>
                        <span id="oc-copy-label">Copy Link</span>
                    </button>
                </div>

                <!-- Divider -->
                <div class="flex items-center gap-3 my-5">
                    <div class="flex-1 h-px bg-white/10"></div>
                    <span class="text-xs text-slate-500 font-medium">or share via</span>
                    <div class="flex-1 h-px bg-white/10"></div>
                </div>

                <!-- Share options -->
                <div class="flex gap-3">
                    <button id="oc-share-native"
                        class="flex-1 flex items-center justify-center gap-2 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 px-4 py-2.5 text-sm font-medium text-slate-300 transition-colors">
                        <span class="material-symbols-outlined !text-base">share</span>
                        Share…
                    </button>
                    <button id="oc-share-email"
                        class="flex-1 flex items-center justify-center gap-2 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 px-4 py-2.5 text-sm font-medium text-slate-300 transition-colors">
                        <span class="material-symbols-outlined !text-base">mail</span>
                        Email
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <!-- Settings Page -->
        <div id="page-settings" class="w-full h-full">
            <!-- Settings Sidebar Nav -->
            <div class="settings-sidebar">
                <div class="settings-sidebar-label">Settings</div>
                <button class="settings-tab active" data-tab="company">
                    <span class="material-symbols-outlined">domain</span>Company Profile
                </button>
                <button class="settings-tab" data-tab="data">
                    <span class="material-symbols-outlined">database</span>Data Management
                </button>
                <button class="settings-tab" data-tab="orgchart">
                    <span class="material-symbols-outlined">account_tree</span>Org Chart
                </button>
                <button class="settings-tab" data-tab="empfields">
                    <span class="material-symbols-outlined">view_column</span>Employee Fields
                </button>
                <button class="settings-tab" data-tab="departments">
                    <span class="material-symbols-outlined">category</span>Departments
                </button>
                <button class="settings-tab" data-tab="appearance">
                    <span class="material-symbols-outlined">palette</span>Appearance
                </button>
                <button class="settings-tab" data-tab="notifications">
                    <span class="material-symbols-outlined">notifications</span>Notifications
                </button>
            </div>

            <!-- Settings Content Area -->
            <div class="settings-content">

                <!-- Company Profile -->
                <div class="settings-panel active" id="stab-company">
                    <h2 class="settings-panel-title">Company Profile</h2>
                    <p class="settings-panel-desc">Appears in the sidebar and browser tab.</p>

                    <div id="settings-alert" class="int-alert success settings-alert">
                        <span class="material-symbols-outlined">check_circle</span>
                        <span id="settings-alert-msg">Settings saved.</span>
                    </div>

                    <div class="settings-field">
                        <label class="settings-label">Company Name</label>
                        <input id="settings-company-name" type="text" placeholder="e.g. Acme Corp"
                            class="settings-input" />
                    </div>

                    <div class="settings-field">
                        <label class="settings-label">Company Logo</label>
                        <p class="settings-hint">Shown in the sidebar. Square images work best.</p>
                        <div class="settings-upload-row">
                            <div id="settings-logo-preview" class="settings-logo-preview"></div>
                            <div>
                                <label for="settings-logo-input" class="int-btn-primary settings-upload-label">
                                    <span class="material-symbols-outlined !text-base">upload</span>Upload Logo
                                </label>
                                <input id="settings-logo-input" type="file" accept="image/*"
                                    class="settings-file-input" />
                                <button id="settings-logo-clear" class="settings-logo-clear">Remove</button>
                                <p class="settings-hint settings-hint--mt">PNG, JPG, SVG · Max 2 MB</p>
                            </div>
                        </div>
                    </div>

                    <div class="settings-field">
                        <label class="settings-label">Browser Favicon</label>
                        <p class="settings-hint">Small icon shown in the browser tab.</p>
                        <div class="settings-upload-row">
                            <div id="settings-favicon-preview" class="settings-favicon-preview">
                                <span class="material-symbols-outlined settings-favicon-icon">tab</span>
                            </div>
                            <div>
                                <label for="settings-favicon-input" class="int-btn-primary settings-upload-label">
                                    <span class="material-symbols-outlined !text-base">upload</span>Upload Favicon
                                </label>
                                <input id="settings-favicon-input" type="file" accept="image/*,.ico"
                                    class="settings-file-input" />
                                <button id="settings-favicon-clear" class="settings-logo-clear">Remove</button>
                                <p class="settings-hint settings-hint--mt">ICO, PNG or SVG · 32×32 px recommended
                                </p>
                            </div>
                        </div>
                    </div>

                    <button id="settings-save-btn" class="int-btn-primary">
                        <span class="material-symbols-outlined !text-base">save</span>Save Changes
                    </button>
                </div>

                <!-- Data Management -->
                <div class="settings-panel" id="stab-data">
                    <h2 class="settings-panel-title">Data Management</h2>
                    <p class="settings-panel-desc">Export or import employee data as CSV.</p>

                    <div class="settings-card settings-card--mb">
                        <div class="settings-card-title">Export to CSV</div>
                        <div class="settings-card-desc">Download all employees as a spreadsheet. Use as a backup or to
                            bulk-edit externally.</div>
                        <button id="settings-export-csv" class="int-btn-primary settings-card-action">
                            <span class="material-symbols-outlined !text-base">download</span>Export CSV
                        </button>
                    </div>

                    <div class="settings-card">
                        <div class="settings-card-title">Import from CSV</div>
                        <div class="settings-card-desc">Upload a CSV to add or update employees in bulk. Matches
                            existing records by email.</div>
                        <div class="settings-hint settings-hint--mb">Required columns: <code
                                class="settings-code">name, email, title, department, location, status, phone, manager</code>
                        </div>
                        <label for="settings-import-csv-input" class="int-btn-primary settings-upload-label">
                            <span class="material-symbols-outlined !text-base">upload</span>Import CSV
                        </label>
                        <input id="settings-import-csv-input" type="file" accept=".csv,text/csv"
                            class="settings-file-input" />
                        <div id="settings-import-result" class="settings-import-result"></div>
                    </div>
                </div>

                <!-- Org Chart Display -->
                <div class="settings-panel" id="stab-orgchart">
                    <h2 class="settings-panel-title">Org Chart Display</h2>
                    <p class="settings-panel-desc">Choose what appears on each card in the org chart.</p>

                    <div class="settings-field">
                        <label class="settings-label">Show on Cards</label>
                        <div id="oc-field-toggles" class="settings-toggle-list"></div>
                    </div>

                    <div class="settings-field">
                        <label class="settings-label">Default Layout</label>
                        <div class="settings-radio-flex">
                            <label class="settings-radio-option">
                                <input type="radio" name="oc-layout" value="tree" class="settings-radio-accent" />
                                Top-Down Tree
                            </label>
                            <label class="settings-radio-option">
                                <input type="radio" name="oc-layout" value="horizontal" class="settings-radio-accent" />
                                Left-Right
                            </label>
                            <label class="settings-radio-option">
                                <input type="radio" name="oc-layout" value="compact" class="settings-radio-accent" />
                                Compact
                            </label>
                        </div>
                    </div>

                    <button id="settings-save-oc" class="int-btn-primary">
                        <span class="material-symbols-outlined !text-base">save</span>Save Org Chart Settings
                    </button>
                </div>

                <!-- Employee Fields -->
                <div class="settings-panel" id="stab-empfields">
                    <h2 class="settings-panel-title">Employee Directory Fields</h2>
                    <p class="settings-panel-desc">Choose which columns are visible in the Employee Directory table.</p>

                    <div id="ed-field-toggles" class="settings-toggle-list settings-toggle-list--mb"></div>

                    <button id="settings-save-ed" class="int-btn-primary">
                        <span class="material-symbols-outlined !text-base">save</span>Save Column Settings
                    </button>
                </div>

                <!-- Departments -->
                <div class="settings-panel" id="stab-departments">
                    <h2 class="settings-panel-title">Departments</h2>
                    <p class="settings-panel-desc">Manage departments used in the Employee Directory and org chart
                        filters. Changes take effect immediately.</p>

                    <div class="settings-field">
                        <label class="settings-label">Add Department</label>
                        <div class="dept-add-row">
                            <input id="dept-name-input" type="text" placeholder="e.g. Customer Support"
                                class="settings-input" />
                            <button id="dept-add-btn" class="int-btn-primary">
                                <span class="material-symbols-outlined !text-base">add</span>Add
                            </button>
                        </div>
                    </div>

                    <div class="settings-field">
                        <label class="settings-label">Current Departments <span id="dept-count"
                                class="dept-count-label"></span></label>
                        <div id="dept-list" class="dept-chip-list">
                            <!-- Rendered by JS -->
                        </div>
                    </div>
                </div>

                <!-- Appearance -->
                <div class="settings-panel" id="stab-appearance">
                    <h2 class="settings-panel-title">Appearance</h2>
                    <p class="settings-panel-desc">Customize the look and feel of the application.</p>

                    <div class="settings-field">
                        <label class="settings-label">Theme</label>
                        <div class="settings-radio-flex">
                            <label class="settings-radio-option">
                                <input type="radio" name="app-theme" value="dark" class="settings-radio-accent" /> 🌙
                                Dark
                            </label>
                            <label class="settings-radio-option">
                                <input type="radio" name="app-theme" value="light" class="settings-radio-accent" /> ☀️
                                Light
                            </label>
                            <label class="settings-radio-option">
                                <input type="radio" name="app-theme" value="system" class="settings-radio-accent" /> 💻
                                System
                            </label>
                        </div>
                    </div>

                    <div class="settings-field">
                        <label class="settings-label">Accent Color</label>
                        <div id="accent-swatches" class="settings-radio-flex"></div>
                    </div>

                    <button id="settings-save-appearance" class="int-btn-primary">
                        <span class="material-symbols-outlined !text-base">save</span>Save Appearance
                    </button>
                </div>

                <!-- Notifications -->
                <div class="settings-panel" id="stab-notifications">
                    <h2 class="settings-panel-title">Notifications</h2>
                    <p class="settings-panel-desc">Choose which events trigger in-app and browser notifications.</p>

                    <!-- Browser push -->
                    <div class="settings-field">
                        <label class="settings-label">Browser Alerts</label>
                        <label class="settings-toggle-row">
                            <input type="checkbox" id="notif-pref-browser-push" />
                            <span class="settings-toggle-label">Allow browser notifications</span>
                            <span id="notif-browser-perm-note"
                                class="settings-always-badge settings-badge-ml-auto"></span>
                        </label>
                        <p class="settings-hint settings-hint-mt">Sends a desktop alert for critical events even
                            when the app is in the background.</p>
                    </div>

                    <!-- Employee events -->
                    <div class="settings-field">
                        <label class="settings-label">Employee Events</label>
                        <div class="settings-toggle-list">
                            <label class="settings-toggle-row">
                                <input type="checkbox" id="notif-pref-emp-add" />
                                <span class="settings-toggle-label">Employee added to directory</span>
                            </label>
                            <label class="settings-toggle-row">
                                <input type="checkbox" id="notif-pref-emp-remove" />
                                <span class="settings-toggle-label">Employee deactivated or removed</span>
                            </label>
                            <label class="settings-toggle-row">
                                <input type="checkbox" id="notif-pref-hierarchy" />
                                <span class="settings-toggle-label">Hierarchy changes</span>
                            </label>
                        </div>
                    </div>

                    <!-- Sync events -->
                    <div class="settings-field">
                        <label class="settings-label">Sync Events</label>
                        <div class="settings-toggle-list">
                            <label class="settings-toggle-row">
                                <input type="checkbox" id="notif-pref-sync-fail" />
                                <span class="settings-toggle-label">Sync failure alerts</span>
                            </label>
                            <label class="settings-toggle-row">
                                <input type="checkbox" id="notif-pref-sync-success" />
                                <span class="settings-toggle-label">Sync success confirmations</span>
                            </label>
                        </div>
                    </div>

                    <button id="settings-save-notifications" class="int-btn-primary">
                        <span class="material-symbols-outlined !text-base">save</span>Save Notification Settings
                    </button>
                </div>

            </div>
        </div>

        <!-- Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        <!-- Firebase SDK (compat) -->
        <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
        <script src="firebase-config.js?v=8"></script>
        <script src="shared-employees.js?v=9"></script>
        <script src="shared-admin-users.js?v=8"></script>
        <script src="shared-logs.js?v=9"></script>
        <script src="shared-departments.js?v=9"></script>
        <script src="notification-store.js?v=4"></script>
        <script src="auth.js?v=8"></script>
        <script src="monday-integration.js?v=4"></script>
        <script src="monday-integration-ui.js?v=4"></script>
        <script src="company-settings.js?v=9"></script>
        <script src="settings.js?v=4"></script>
        <script src="org-chart.js?v=32"></script>
        <script src="employee-directory.js?v=4"></script>
        <script src="user-management.js?v=4"></script>
        <script src="app.js?v=4"></script>
        <script src="notifications.js?v=4"></script>
        <script src="auth-ui.js?v=8"></script>
</body>

</html>